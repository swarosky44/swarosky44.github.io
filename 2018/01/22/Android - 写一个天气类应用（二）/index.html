<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="Android - 启动页"/>




  <meta name="keywords" content="Android," />




  <link rel="alternate" href="/default" title="Listen">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.4.x" />



<link rel="canonical" href="http://swarosky44.github.io/2018/01/22/Android - 写一个天气类应用（二）/"/>


<meta name="description" content="继续撸那个天气类的 App，这次把写启动页过程中学到的知识点记录一下：  模仿项目：SeeWeather">
<meta name="keywords" content="Android">
<meta property="og:type" content="article">
<meta property="og:title" content="Android - 启动页">
<meta property="og:url" content="http://swarosky44.github.io/2018/01/22/Android - 写一个天气类应用（二）/index.html">
<meta property="og:site_name" content="Listen">
<meta property="og:description" content="继续撸那个天气类的 App，这次把写启动页过程中学到的知识点记录一下：  模仿项目：SeeWeather">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-01-22T09:42:38.919Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android - 启动页">
<meta name="twitter:description" content="继续撸那个天气类的 App，这次把写启动页过程中学到的知识点记录一下：  模仿项目：SeeWeather">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.4.x" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />





<script>
  var CONFIG = {
    search: false,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  

  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-103969555-1', 'auto');
        ga('send', 'pageview');
  </script>



    <title> Android - 启动页 · Listen </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Listen</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            Categories
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Listen</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              Categories
            
          </a>
        </li>
      
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Android - 启动页
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Jan 22, 2018
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#AndroidManifest-xml"><span class="toc-text">AndroidManifest.xml</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FirstActivity-class"><span class="toc-text">FirstActivity.class</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#渐隐渐现的启动动画"><span class="toc-text">渐隐渐现的启动动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#延迟启动主活动"><span class="toc-text">延迟启动主活动</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p>继续撸那个天气类的 App，这次把写启动页过程中学到的知识点记录一下：</p>
<blockquote>
<p>模仿项目：<a href="https://github.com/xcc3641/SeeWeather" target="_blank" rel="noopener">SeeWeather</a></p>
</blockquote>
<a id="more"></a>
<p>首先简单讲一下项目的文件目录结构<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">├── java</div><div class="line">│   └── com</div><div class="line">│       └── example</div><div class="line">│           └── lisen</div><div class="line">│               └── seeweathercp</div><div class="line">│                   ├── base</div><div class="line">│                   ├── common</div><div class="line">│                   │   └── utils</div><div class="line">│                   ├── component</div><div class="line">│                   └── modules</div><div class="line">│                       ├── city</div><div class="line">│                       │   ├── adapter</div><div class="line">│                       │   ├── db</div><div class="line">│                       │   ├── domain</div><div class="line">│                       │   └── ui</div><div class="line">│                       ├── launch</div><div class="line">│                       ├── main</div><div class="line">│                       │   ├── adapter</div><div class="line">│                       │   ├── domain</div><div class="line">│                       │   ├── listener</div><div class="line">│                       │   └── ui</div><div class="line">│                       ├── service</div><div class="line">│                       └── setting</div><div class="line">│                           └── ui</div><div class="line">└── res</div><div class="line">    ├── anim</div><div class="line">    ├── drawable</div><div class="line">    ├── drawable-v21</div><div class="line">    ├── drawable-v24</div><div class="line">    ├── layout</div><div class="line">    ├── menu</div><div class="line">    ├── mipmap-anydpi-v26</div><div class="line">    ├── mipmap-hdpi</div><div class="line">    ├── mipmap-mdpi</div><div class="line">    ├── mipmap-night</div><div class="line">    ├── mipmap-xhdpi</div><div class="line">    ├── mipmap-xxhdpi</div><div class="line">    ├── mipmap-xxxhdpi</div><div class="line">    ├── raw</div><div class="line">    ├── values</div><div class="line">    ├── values-v21</div><div class="line">    └── xml</div></pre></td></tr></table></figure></p>
<p>其中的 modules 文件夹就是用来存放应用各个模块对应的 Activity, 我们可以在 launch 文件夹上右键选择 <code>create -&gt; class</code>, 这里不选择 <code>create -&gt; activity</code>，因为启动页的页面内容只有一张图片，不需要单独的一个 layout.xml 文件来描述页面的结构，直接通过 AndroidManifest.xml 里面 style 的设置就可以完成了。</p>
<p>完成创建之后，会在对应的目录下能够找到 <code>laungch/FirstActivity</code>，在 AndroidManifest.xml 文件里面也可以找到对 FirstActivity 的注册内容。</p>
<h3 id="AndroidManifest-xml"><a href="#AndroidManifest-xml" class="headerlink" title="AndroidManifest.xml"></a>AndroidManifest.xml</h3><p>在 AndroidManifest.xml 文件里面我们更改成如下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">activity</span></span></div><div class="line">  <span class="attr">android:name</span>=<span class="string">".modules.launch.FirstActivity"</span></div><div class="line">  <span class="attr">android:theme</span>=<span class="string">"@style/FirstTheme"</span>&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span></div><div class="line"></div><div class="line">      <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这里我们需要记录的知识点是 <code>android:theme=&quot;@style/FirstTheme&quot;</code>，这里设置 theme 属性是 Android 中实现样式的三种方式之一，是最高层级的样式设置，在 AndroidManifest.xml 中对 Application 设置就是意味着这个应用下所有的视图元素都将实现 theme 中的样式，是全局样式。对 Activity 设置 theme 类似，只不过是针对该 Activity 下面的所有视图元素。</p>
<p>所以对于 <code>android:theme=&quot;@style/FirstTheme&quot;</code> 在 FirstActivity 中所有视图元素都会有这些属性的特性。</p>
<p>这里 @style 是指 <code>res/values/styles.xml</code> 文件，是集中用来存放 <code>&lt;style&gt;</code> 标签声明的样式：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"FirstTheme"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat"</span>&gt;</span><span class="xml"></span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowNoTitle"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowBackground"</span>&gt;</span>@mipmap/first_backpng<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p> 这个 <code>&lt;style&gt;</code> 的 name 就是这个样式的名字，类似于 css 的 class 名字的存在，parent 是继承的意思。这个样式下只有两个属性：</p>
<ul>
<li><code>&lt;item name=&quot;android:windowNoTitle&quot;&gt;true&lt;/item&gt;</code>：声明该页面不需要 Title；</li>
<li><code>&lt;item name=&quot;android:windowBackground&quot;&gt;@mipmap/first_backpng&lt;/item&gt;</code>：声明背景图为 first_backpng;</li>
</ul>
<p>这里 @mipmap 就是 <code>/res/mipmap/</code>，我们直接将整个 mipmap 文件夹 copy 复制就 OK 了。</p>
<p>关于 Andorid 的样式，想多记录一点东西，Android 设置元素样式的方法有三种：<code>Attr</code>、<code>Style</code> &amp; <code>Theme</code>，但是也没有相关书籍专门介绍这一类东西，只看 Android 的官方文档比较枯燥，所以建议一边撸项目一边看别人代码，遇见没见过的直接问 Google 比较实在点。这里关于 Android 样式有两篇文件（ <a href="https://www.jianshu.com/p/dd79220b47dd" target="_blank" rel="noopener">Attr、Style和Theme详解</a> &amp; <a href="https://keeganlee.me/post/android/20150830" target="_blank" rel="noopener">ANDROID样式的开发</a> ）讲得比较深入可以了解一下。</p>
<p>另外按照上一节中所写，我们将启动页设置为桌面 UI 启动项的页面，同时也是项目的首页面。</p>
<p>完成了启动页的页面再来看一下启动页的 Java 代码中的 UI 逻辑：</p>
<h2 id="FirstActivity-class"><a href="#FirstActivity-class" class="headerlink" title="FirstActivity.class"></a>FirstActivity.class</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = FirstActivity.class.getSimpleName();</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        Observable.timer(<span class="number">1</span>, TimeUnit.SECONDS)</div><div class="line">                .observeOn(AndroidSchedulers.mainThread())</div><div class="line">                .subscribe(aLong -&gt; &#123;</div><div class="line">                    MainActivity.launch(<span class="keyword">this</span>);</div><div class="line">                    finish();</div><div class="line">                &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里面的逻辑也十分简单，就只有两个：</p>
<ol>
<li>页面渐隐渐现的动画</li>
<li>延迟启动主活动</li>
</ol>
<h3 id="渐隐渐现的启动动画"><a href="#渐隐渐现的启动动画" class="headerlink" title="渐隐渐现的启动动画"></a>渐隐渐现的启动动画</h3><p><code>overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out)</code> 负责实现这个逻辑，该函数为原生的 API，用于实现 Activity 在切换和退出过程中的动效。第一个参数是启动动效，第二个参数是结束动效。<br>对动效的具体实现都在 anim 文件中完成声明或者系统自带的一些简易动效，<code>overridePendingTransition</code> 负责执行。</p>
<h3 id="延迟启动主活动"><a href="#延迟启动主活动" class="headerlink" title="延迟启动主活动"></a>延迟启动主活动</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Observable.timer(<span class="number">1</span>, TimeUnit.SECONDS)</div><div class="line">    .observeOn(AndroidSchedulers.mainThread())</div><div class="line">    .subscribe(aLong -&gt; &#123;</div><div class="line">        MainActivity.launch(<span class="keyword">this</span>);</div><div class="line">        finish();</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>这里 Observable.timer 就是延迟执行，类似于 JS 中 <code>setTimeout</code>。timer 的第一个参数是数值，第二个参数是单位。这里使用的就是 Android 开发过程中非常流行的一种异步处理库 RxJava。其具体实现和 RxJS 都是遵循 RX 架构的设计思想。因为 RxJava 的使用十分频繁，所以对于它的了解因为更多一些，这里可以推荐两个教程：<a href="https://www.gitbook.com/book/mcxiaoke/rxdocs/details" target="_blank" rel="noopener">ReactiveX/RxJava文档中文版</a> &amp; <a href="https://gank.io/post/560e15be2dca930e00da1083" target="_blank" rel="noopener">给 Android 开发者的 RxJava 详解</a></p>
<p>以上就是实现一个简单的启动页 &amp; 简单动效的过程中所查阅到的知识点。</p>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>Author: </span>
      <span>Listen</span>
    </p>
    <p class="copyright-item">
      <span>Origin: </span>
      <a href="http://swarosky44.github.io">http://swarosky44.github.io</a>
    </p>
    <p class="copyright-item">
      <span>Link: </span>
      <a href="http://swarosky44.github.io/2018/01/22/Android - 写一个天气类应用（二）/">http://swarosky44.github.io/2018/01/22/Android - 写一个天气类应用（二）/</a>
    </p>

    <p class="copyright-item lincese">
      
      本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
    </p>
  </div>



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/Android/">Android</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2018/02/06/Vue - 动态模板输出解决方案/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Vue - 动态模板输出解决方案</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2018/01/11/Set & Map/">
        <span class="next-text nav-default">Map & Set</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
      
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2018

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Listen</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://swarosky44.github.io/2018/01/22/Android - 写一个天气类应用（二）/';
        this.page.identifier = '2018/01/22/Android - 写一个天气类应用（二）/';
        this.page.title = 'Android - 启动页';
    };
    (function() {
    var d = document, s = d.createElement('script');

    s.src = '//swarosky44.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();  
  </script>




    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.4.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.4.x"></script>

    
  </body>
</html>
